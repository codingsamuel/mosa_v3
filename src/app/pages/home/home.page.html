@if ((homeState$ | async); as state) {
    <app-header [name]="cvData.firstName" [branch]="cvData.branch"/>

    <section id="aboutMe" class="section">

        <div class="content">

            <div class="profile">
                <img [ngSrc]="cvData.imageUrl" alt="Me" class="image" [width]="150" [height]="150">

                <h3 class="title">{{ cvData.firstName }} {{ cvData.lastName }}</h3>
                <p class="subtitle">{{ cvData.branch }}</p>

                <div class="cv-list">
                    @for (cvItem of (cvData.cvInfo); track $index) {
                        <ng-container [ngTemplateOutlet]="cvHeading"
                                      [ngTemplateOutletContext]="{ icon: cvItem.icon, label: cvItem.label }"></ng-container>

                        @if ((cvItem.items[ 0 ] | as: ListType)[ 'key' ]) {
                            @for (cvSubItem of (cvItem.items); track $index) {
                                <ng-container [ngTemplateOutlet]="cvContent"
                                              [ngTemplateOutletContext]="{ $implicit: cvSubItem }"></ng-container>
                            }
                        } @else {
                            <ng-container [ngTemplateOutlet]="cvContentList"
                                          [ngTemplateOutletContext]="{ $implicit: cvItem.items }"></ng-container>
                        }
                    }
                </div>

                <div class="download-btn">
                    @if (cvData.downloads[ 0 ]; as download) {
                        <a mat-raised-button color="primary" (click)="generateCv()" target="_blank">
                            <mat-icon>{{ download.icon }}</mat-icon>
                            {{ download.name | translate }}
                        </a>
                    }
                </div>
            </div>

            <div class="content-right">
                <div class="bio">
                    <h2>{{ 'mosa.pages.home.biography.label' | translate }}</h2>
                    <p>
                        {{ 'mosa.pages.home.biography[0].text' | translate }}
                    </p>
                    <p>
                        {{ 'mosa.pages.home.biography[1].text' | translate }}
                    </p>

                    <h2>{{ 'mosa.pages.home.my-journey.label' | translate }}</h2>
                    <div class="journey">
                        @for (journey of cvData.timeline; track $index) {
                            <div class="journey-item">
                                <div class="icon">
                                    <mat-icon>{{ journey.icon }}</mat-icon>
                                </div>
                                <div class="text">
                                    <div class="title">{{ journey.label | translate }}</div>
                                    <div class="subtitle">
                                        @if(!journey.endDate) {
                                            {{ 'mosa.commons.since.label' | translate }} {{ journey.startDate | date: 'MMMM y' }}
                                        } @else {
                                            {{ journey.startDate | date: 'MMMM y' }} -
                                            {{ journey.endDate | date: 'MMMM y' }}
                                        }
                                    </div>
                                </div>
                                <ul>
                                    @for (item of journey.items; track $index) {
                                        <li>{{ item | as: '' | translate }}</li>
                                    }
                                </ul>
                            </div>
                        }
                    </div>

                    <h2>{{ 'mosa.pages.home.social-media.label' | translate }}</h2>
                    @for (social of cvData.socialMedia; track $index) {
                        <a mat-icon-button [href]="social.url" target="_blank">
                            <mat-icon [svgIcon]="social.icon" [attr.aria-label]="social.name"/>
                        </a>
                    }
                </div>

                <div class="image">
                    <svg width="607" height="588" viewBox="0 0 607 588" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M0.75 188L78.75 13H118.75L197 188H154.5L90.5 33.5H106.5L42.25 188H0.75ZM39.75 150.5L50.5 119.75H140.5L151.5 150.5H39.75ZM235.156 188V13H320.656C342.656 13 359.156 17.1667 370.156 25.5C381.323 33.8333 386.906 44.8333 386.906 58.5C386.906 67.6667 384.656 75.6667 380.156 82.5C375.656 89.1667 369.49 94.3333 361.656 98C353.823 101.667 344.823 103.5 334.656 103.5L339.406 93.25C350.406 93.25 360.156 95.0833 368.656 98.75C377.156 102.25 383.74 107.5 388.406 114.5C393.24 121.5 395.656 130.083 395.656 140.25C395.656 155.25 389.74 167 377.906 175.5C366.073 183.833 348.656 188 325.656 188H235.156ZM275.406 157.5H322.656C333.156 157.5 341.073 155.833 346.406 152.5C351.906 149 354.656 143.5 354.656 136C354.656 128.667 351.906 123.25 346.406 119.75C341.073 116.083 333.156 114.25 322.656 114.25H272.406V84.75H315.656C325.49 84.75 332.99 83.0833 338.156 79.75C343.49 76.25 346.156 71 346.156 64C346.156 57.1667 343.49 52.0833 338.156 48.75C332.99 45.25 325.49 43.5 315.656 43.5H275.406V157.5ZM108.75 387C94.9167 387 82.0833 384.75 70.25 380.25C58.5833 375.75 48.4167 369.417 39.75 361.25C31.25 353.083 24.5833 343.5 19.75 332.5C15.0833 321.5 12.75 309.5 12.75 296.5C12.75 283.5 15.0833 271.5 19.75 260.5C24.5833 249.5 31.3333 239.917 40 231.75C48.6667 223.583 58.8333 217.25 70.5 212.75C82.1667 208.25 94.8333 206 108.5 206C122.333 206 135 208.25 146.5 212.75C158.167 217.25 168.25 223.583 176.75 231.75C185.417 239.917 192.167 249.5 197 260.5C201.833 271.333 204.25 283.333 204.25 296.5C204.25 309.5 201.833 321.583 197 332.75C192.167 343.75 185.417 353.333 176.75 361.5C168.25 369.5 158.167 375.75 146.5 380.25C135 384.75 122.417 387 108.75 387ZM108.5 352.5C116.333 352.5 123.5 351.167 130 348.5C136.667 345.833 142.5 342 147.5 337C152.5 332 156.333 326.083 159 319.25C161.833 312.417 163.25 304.833 163.25 296.5C163.25 288.167 161.833 280.583 159 273.75C156.333 266.917 152.5 261 147.5 256C142.667 251 136.917 247.167 130.25 244.5C123.583 241.833 116.333 240.5 108.5 240.5C100.667 240.5 93.4167 241.833 86.75 244.5C80.25 247.167 74.5 251 69.5 256C64.5 261 60.5833 266.917 57.75 273.75C55.0833 280.583 53.75 288.167 53.75 296.5C53.75 304.667 55.0833 312.25 57.75 319.25C60.5833 326.083 64.4167 332 69.25 337C74.25 342 80.0833 345.833 86.75 348.5C93.4167 351.167 100.667 352.5 108.5 352.5ZM332.438 387C307.604 387 288.188 380.083 274.188 366.25C260.188 352.417 253.188 332.667 253.188 307V209H293.688V305.5C293.688 322.167 297.104 334.167 303.938 341.5C310.771 348.833 320.354 352.5 332.688 352.5C345.021 352.5 354.604 348.833 361.438 341.5C368.271 334.167 371.687 322.167 371.687 305.5V209H411.688V307C411.688 332.667 404.688 352.417 390.688 366.25C376.688 380.083 357.271 387 332.438 387ZM505.029 384V242H449.029V209H601.529V242H545.529V384H505.029ZM23.75 580V405H57.25L131.75 528.5H114L187.25 405H220.5L221 580H183L182.75 463.25H189.75L131.25 561.5H113L53.25 463.25H61.75V580H23.75ZM319.77 475.5H404.02V507H319.77V475.5ZM322.77 547.5H418.02V580H282.52V405H414.77V437.5H322.77V547.5Z"
                            fill="#ACD0C6"/>
                        <path
                            d="M80.032 256V166.4H93.728L132.896 231.808H125.728L164.256 166.4H177.952L178.08 256H162.336L162.208 191.104H165.536L132.768 245.76H125.344L92.064 191.104H95.904V256H80.032ZM224.298 256V220.544L228.01 230.784L189.098 166.4H206.89L238.122 218.24H228.138L259.626 166.4H276.01L237.098 230.784L240.938 220.544V256H224.298Z"
                            fill="black"/>
                        <path
                            d="M199.064 400.536C191.896 400.536 185.027 399.597 178.456 397.72C171.885 395.757 166.595 393.24 162.584 390.168L169.624 374.552C173.464 377.283 177.987 379.544 183.192 381.336C188.483 383.043 193.816 383.896 199.192 383.896C203.288 383.896 206.573 383.512 209.048 382.744C211.608 381.891 213.485 380.739 214.68 379.288C215.875 377.837 216.472 376.173 216.472 374.296C216.472 371.907 215.533 370.029 213.656 368.664C211.779 367.213 209.304 366.061 206.232 365.208C203.16 364.269 199.747 363.416 195.992 362.648C192.323 361.795 188.611 360.771 184.856 359.576C181.187 358.381 177.816 356.845 174.744 354.968C171.672 353.091 169.155 350.616 167.192 347.544C165.315 344.472 164.376 340.547 164.376 335.768C164.376 330.648 165.741 325.997 168.472 321.816C171.288 317.549 175.469 314.179 181.016 311.704C186.648 309.144 193.688 307.864 202.136 307.864C207.768 307.864 213.315 308.547 218.776 309.912C224.237 311.192 229.059 313.155 233.24 315.8L226.84 331.544C222.659 329.155 218.477 327.405 214.296 326.296C210.115 325.101 206.019 324.504 202.008 324.504C197.997 324.504 194.712 324.973 192.152 325.912C189.592 326.851 187.757 328.088 186.648 329.624C185.539 331.075 184.984 332.781 184.984 334.744C184.984 337.048 185.923 338.925 187.8 340.376C189.677 341.741 192.152 342.851 195.224 343.704C198.296 344.557 201.667 345.411 205.336 346.264C209.091 347.117 212.803 348.099 216.472 349.208C220.227 350.317 223.64 351.811 226.712 353.688C229.784 355.565 232.259 358.04 234.136 361.112C236.099 364.184 237.08 368.067 237.08 372.76C237.08 377.795 235.672 382.403 232.856 386.584C230.04 390.765 225.816 394.136 220.184 396.696C214.637 399.256 207.597 400.536 199.064 400.536ZM268.559 399V326.296H239.887V309.4H317.967V326.296H289.295V399H268.559ZM371.394 400.536C364.311 400.536 357.741 399.384 351.682 397.08C345.709 394.776 340.503 391.533 336.066 387.352C331.714 383.171 328.301 378.264 325.826 372.632C323.437 367 322.242 360.856 322.242 354.2C322.242 347.544 323.437 341.4 325.826 335.768C328.301 330.136 331.757 325.229 336.194 321.048C340.631 316.867 345.837 313.624 351.81 311.32C357.783 309.016 364.269 307.864 371.266 307.864C378.349 307.864 384.834 309.016 390.722 311.32C396.695 313.624 401.858 316.867 406.21 321.048C410.647 325.229 414.103 330.136 416.578 335.768C419.053 341.315 420.29 347.459 420.29 354.2C420.29 360.856 419.053 367.043 416.578 372.76C414.103 378.392 410.647 383.299 406.21 387.48C401.858 391.576 396.695 394.776 390.722 397.08C384.834 399.384 378.391 400.536 371.394 400.536ZM371.266 382.872C375.277 382.872 378.946 382.189 382.274 380.824C385.687 379.459 388.674 377.496 391.234 374.936C393.794 372.376 395.757 369.347 397.122 365.848C398.573 362.349 399.298 358.467 399.298 354.2C399.298 349.933 398.573 346.051 397.122 342.552C395.757 339.053 393.794 336.024 391.234 333.464C388.759 330.904 385.815 328.941 382.402 327.576C378.989 326.211 375.277 325.528 371.266 325.528C367.255 325.528 363.543 326.211 360.13 327.576C356.802 328.941 353.858 330.904 351.298 333.464C348.738 336.024 346.733 339.053 345.282 342.552C343.917 346.051 343.234 349.933 343.234 354.2C343.234 358.381 343.917 362.264 345.282 365.848C346.733 369.347 348.695 372.376 351.17 374.936C353.73 377.496 356.717 379.459 360.13 380.824C363.543 382.189 367.255 382.872 371.266 382.872ZM435.874 399V309.4H474.658C482.679 309.4 489.591 310.723 495.394 313.368C501.197 315.928 505.677 319.64 508.834 324.504C511.991 329.368 513.57 335.171 513.57 341.912C513.57 348.568 511.991 354.328 508.834 359.192C505.677 363.971 501.197 367.64 495.394 370.2C489.591 372.76 482.679 374.04 474.658 374.04H447.394L456.61 364.952V399H435.874ZM492.834 399L470.434 366.488H492.578L515.234 399H492.834ZM456.61 367.256L447.394 357.528H473.506C479.906 357.528 484.685 356.163 487.842 353.432C490.999 350.616 492.578 346.776 492.578 341.912C492.578 336.963 490.999 333.123 487.842 330.392C484.685 327.661 479.906 326.296 473.506 326.296H447.394L456.61 316.44V367.256ZM551.021 399V362.392L555.757 374.936L516.333 309.4H538.349L568.557 359.704H555.885L586.221 309.4H606.573L567.149 374.936L571.757 362.392V399H551.021Z"
                            fill="#55154A"/>
                    </svg>
                </div>
            </div>
        </div>

    </section>

    <section id="myServices" class="section">
        <h1>{{ 'mosa.pages.home.my-services.label' | translate }}</h1>
        <div class="card-wrapper">
            <mat-card>
                <mat-card-header>
                    <mat-card-title>
                        <mat-icon>brush</mat-icon>
                        <span>{{ 'mosa.pages.home.my-services[0].label' | translate }}</span>
                    </mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>
                        {{ 'mosa.pages.home.my-services[0].text[0].value' | translate }}
                    </p>
                    <p>
                        {{ 'mosa.pages.home.my-services[0].text[1].value' | translate }}
                    </p>
                </mat-card-content>
            </mat-card>

            <mat-card>
                <mat-card-header>
                    <mat-card-title>
                        <mat-icon>computer</mat-icon>
                        <span>{{ 'mosa.pages.home.my-services[1].label' | translate }}</span>
                    </mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>
                        {{ 'mosa.pages.home.my-services[1].text[0].value' | translate }}
                    </p>
                    <p>
                        {{ 'mosa.pages.home.my-services[1].text[1].value' | translate }}
                    </p>
                </mat-card-content>
            </mat-card>

            <mat-card>
                <mat-card-header>
                    <mat-card-title>
                        <mat-icon>smartphone</mat-icon>
                        <span>{{ 'mosa.pages.home.my-services[2].label' | translate }}</span>
                    </mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <p>
                        {{ 'mosa.pages.home.my-services[2].text[0].value' | translate }}
                    </p>
                    <p>
                        {{ 'mosa.pages.home.my-services[2].text[1].value' | translate }}
                    </p>
                </mat-card-content>
            </mat-card>
        </div>
    </section>

    <section id="rating" class="section">
        <div>
            <h1>
                {{ 'mosa.pages.home.rating[0].label' | translate }},<br>
                {{ 'mosa.pages.home.rating[1].label' | translate }}
            </h1>

            @if (state.rating; as rating) {
                <div class="rating">
                    <div class="stars">
                        <input type="radio" name="rating" id="rating1" value="1" (change)="addRating(1)">
                        <input type="radio" name="rating" id="rating2" value="2" (change)="addRating(2)">
                        <input type="radio" name="rating" id="rating3" value="3" (change)="addRating(3)">
                        <input type="radio" name="rating" id="rating4" value="4" (change)="addRating(4)">
                        <input type="radio" name="rating" id="rating5" value="5" (change)="addRating(5)">
                    </div>
                    <div>
                        {{ 'mosa.pages.home.rating.label' | translate: { rating, total: rating.count } }}
                    </div>
                </div>
            }
        </div>

        <div class="download-btns">
            @for (download of cvData.downloads; track $index) {
                <div>
                    @if ($index === 0) {
                        <button mat-raised-button color="primary" (click)="generateCv()">
                            <mat-icon>{{ download.icon }}</mat-icon>
                            {{ download.name | translate }}
                        </button>
                    } @else {
                        <a mat-raised-button color="primary" [href]="download.url" target="_blank">
                            <mat-icon>{{ download.icon }}</mat-icon>
                            {{ download.name | translate }}
                        </a>
                    }
                </div>
            }
        </div>
    </section>

    <app-footer [socialMedia]="cvData.socialMedia"/>

    <ng-template #cvHeading let-icon="icon" let-label="label">
        <div class="cv-heading">
            <div class="cv-heading-inner">
                <mat-icon>{{ icon }}</mat-icon>
                <span>{{ label | translate }}</span>
            </div>
        </div>
    </ng-template>

    <ng-template #cvContent let-data>
        <div class="cv-content">
            <span>{{ data.key | translate }}:</span>
            <span>{{ data.value | translate }}</span>
        </div>
    </ng-template>

    <ng-template #cvContentList let-data>
        <div class="cv-content-list">
            <mat-chip-set>
                @for (chip of data; track $index) {
                    <mat-chip>{{ chip }}</mat-chip>
                }
            </mat-chip-set>
        </div>
    </ng-template>

}
